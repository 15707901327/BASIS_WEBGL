<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>内置函数</title>
  <link rel="stylesheet" href="../../css/base.css">
  <link rel="stylesheet" href="../css/base.css">
</head>
<body>
<div class="l-r-wrapper">
  <div class="left">
    <ul class="ul-1">
      <li><a href="#vec4">vec4 vec4()</a></li>
      <li><a href="#acos">角度和三角函数</a></li>
      <li>
        <a href="#texture">纹理查询函数</a>
        <ul class="ul-1">
          <li><a href="#texture2D">texture2D()</a></li>
        </ul>
      </li>
      <li><a href="#typeConversion">类型转换函数</a></li>
    </ul>
    <h4><a href="#geometric">几何函数</a></h4>
    <h4><a href="#exponential">指数函数</a></h4>
    <h4><a href="#common">通用函数</a></h4>
    <ul class="ul-1">
      <li><a href="#mix">mix()</a></li>
      <li><a href="#smoothstep">smoothstep()</a></li>
    </ul>
  </div>
  <div class="right">
    <section id="vec4">
      <h4>vec4 vec4()</h4>
      <p>根据v0，v1，v2，v3值创建vec4对象</p>
      <div class="content">
        <strong>参数：</strong>
        <p>v0，v1，v2，v3：指定4个浮点型分量</p>
        <strong>返回值：</strong>
        <p>由v0，v1，v2，v3组成的vec4对象</p>
      </div>
    </section>
    <section id="geometric" class="section1">
      <div class="title">几何函数</div>
      <div class="content">
        <table border="1">
          <tr>
            <th>语法</th>
            <th>描述</th>
          </tr>
          <tr>
            <td>
              float length(float x);<br>
              float length(vec2 x);<br>
              float length(vec3 x);<br>
              float length(vec4 x);<br>
            </td>
            <td>返回矢量x的长度</td>
          </tr>
          <tr>
            <td>
              float dot(float x, float y);<br>
              float dot(vec2 x, vec2 y);<br>
              float dot(vec3 x, vec3 y);<br>
              float dot(vec4 x, vec4 y);<br>
            </td>
            <td>返回x和y的点积, 对于vec3而言就是x[0] * y[0] + x[1] * y[1] + x[2] * y[2]</td>
          </tr>
          <tr>
            <td>
              vec3 cross(vec3 x,vec3 y)<br>
            </td>
            <td>
              返回x和y的叉积，对于vec3而言，就是<br>
              result[0] = x[1]*y[2]-y[1]*x[2];<br>
              result[1] = x[2]*y[0]-y[2]*x[0];<br>
              result[2] = x[0]*y[1]-y[0]*x[1];<br>
            </td>
          </tr>
          <tr>
            <td>
              float normalize(float x);<br>
              vec2 normalize(vec2 x);<br>
              vec3 normalize(vec3 x);<br>
              vec4 normalize(vec4 x);<br>
            </td>
            <td>对x进行归一化，保持矢量方向不变但长度为1，即x/length(x).</td>
          </tr>
        </table>
      </div>
    </section>
    <section id="exponential" class="section1">
      <div class="title">指数函数</div>
      <div class="content">
        <table border="1">
          <tr>
            <th>语法</th>
            <th>描述</th>
          </tr>
          <tr>
            <td>
              float pow(float x,float y);<br>
              vec2 pow(vec2 x,vec2 y);<br>
              vec3 pow(vec3 x,vec3 y);<br>
              vec4 pow(vec4 x,vec4 y);<br>
            </td>
            <td>返回x的y次幂，即x^y，如果x < 0,则返回未定义值。如果x = 0而y < 0 ,则返回未定义值。注意对于矢量而言，这是一个逐分量的运算。</td>
          </tr>
          <tr>
            <td>
              float exp(float x);<br>
              vec2 exp(vec2 x);<br>
              vec3 exp(vec3 x);<br>
              vec4 exp(vec4 x);<br>
            </td>
            <td>返回x自然指数幂，即e^x</td>
          </tr>
        </table>
      </div>
    </section>
    <section id="common" class="section1">
      <div class="title">通用函数</div>
      <div class="content">
        <table border="1">
          <tr>
            <th>语法</th>
            <th>描述</th>
          </tr>
          <tr>
            <td>
              float abs(float x);<br>
              vec2 abs(vec2 x);<br>
              vec3 abs(vec3 x);<br>
              vec4 abs(vec4 x);<br>
            </td>
            <td>返回x的无符号绝对值，即如果x》= 0，返回x，否则返回-x</td>
          </tr>
          <tr>
            <td>
              float fract(float x);<br>
              vec2 fract(vec2 x);<br>
              vec3 fract(vec3 x);<br>
              vec4 fract(vec4 x);<br>
            </td>
            <td>返回x的小数部分，即返回x-floor(x)</td>
          </tr>
          <tr>
            <td>
              float clamp(float x, float minVal, float maxVal);<br>
              vec2 clamp(vec2 x, vec2 minVal, vec2 maxVal);<br>
              vec3 clamp(vec3 x, vec3 minVal, vec3 maxVal);<br>
              vec4 clamp(vec4 x, vec4 minVal, vec4 maxVal);<br>
              vec2 clamp(vec2 x, float minVal, float maxVal);<br>
              vec3 clamp(vec3 x, float minVal, float maxVal);<br>
              vec4 clamp(vec4 x, float minVal, float maxVal);<br>
            </td>
            <td>将x限制在minVal和maxVal之间，即返回min(max(x,minVal),maxVal)。如果minVal > maxVal，则返回未定义</td>
          </tr>
          <tr>
            <td>
              float mod(float x, float y);<br>
              vec2 mod(vec2 x, vec2 y);<br>
              vec3 mod(vec3 x, vec3 y);<br>
              vec4 mod(vec4 x, vec4 y);<br>
              vec2 mod(vec2 x, float y);<br>
              vec3 mod(vec3 x, float y);<br>
              vec4 mod(vec4 x, float y);<br>
            </td>
            <td>模数（模），返回x除以y的余数，即（x-y*floor(x/y)）.给定两个正整数x和y，mod(x,y)可以求得x除以y的余数。注意对于矢量而言，这是一个逐分量的运算。</td>
          </tr>
          <tr>
            <td>
              float min(float x, float y);<br>
              vec2 min(vec2 x, vec2 y);<br>
              vec3 min(vec3 x, vec3 y);<br>
              vec4 min(vec4 x, vec4 y);<br>
              vec2 min(vec2 x, float y);<br>
              vec3 min(vec3 x, float y);<br>
              vec4 min(vec4 x, float y);<br>
            </td>
            <td>返回最小值，即如果y《x则返回y，否则返回x。注意对于矢量而言，这是一个逐分量的运算。</td>
          </tr>
          <tr>
            <td>
              float max(float x, float y);<br>
              vec2 max(vec2 x, vec2 y);<br>
              vec3 max(vec3 x, vec3 y);<br>
              vec4 max(vec4 x, vec4 y);<br>
              vec2 max(vec2 x, float y);<br>
              vec3 max(vec3 x, float y);<br>
              vec4 max(vec4 x, float y);<br>
            </td>
            <td>返回最大值，即如果x《y则返回y，否则返回x。注意对于矢量而言，这是一个逐分量的运算。</td>
          </tr>
        </table>
      </div>
      <section id="mix">
        <h4>线性函数（mix()）</h4>
        <table border="1">
          <tr>
            <th>语法</th>
            <th>描述</th>
          </tr>
          <tr>
            <td>
              float mix(float x, float y,float a);<br>
              vec2 mix(vec2 x, vec2 y,float a);<br>
              vec3 mix(vec3 x, vec3 y,float a);<br>
              vec4 mix(vec4 x, vec4 y,float a);<br>
              vec2 mix(vec2 x, float y,vec2 a);<br>
              vec3 mix(vec3 x, float y,vec3 a);<br>
              vec4 mix(vec4 x, float y,vec4 a);<br>
              vec2 mix(vec2 x, vec2 y,vec2 a);<br>
              vec3 mix(vec3 x, vec3 y,vec3 a);<br>
              vec4 mix(vec4 x, vec4 y,vec4 a);<br>
            </td>
            <td>
              返回x和y的线性混合，即x*(1-a)+y*a
              <ul class="ul-2-num">
                <li>当a的值在[0-1]时,返回x、y连线上的一个点</li>
                <li>当a的值在大于1时,返回yx延长线上的一个点</li>
                <li>当a的值小于1时,返回xy延长线上的一个点</li>
              </ul>
            </td>
          </tr>
        </table>
      </section>
      <section id="smoothstep">
        <h4>smoothstep()</h4>
        <p>给定三个值min，max和input，函数将返回0到1之间的数字，表示输入值与最小值和最大值的关系。</p>
        <div class="content">
          <strong>语法：</strong>
          <table border="1">
            <tr>
              <th>语法</th>
              <th>描述</th>
            </tr>
            <tr>
              <td>
                float smoothstep(float edge0, float edge1,float x);<br>
                vec2 smoothstep(vec2 edge0, vec2 edge1,vec2 x);<br>
                vec3 smoothstep(vec3 edge0, vec3 edge1,vec3 x);<br>
                vec4 smoothstep(vec4 edge0, vec4 edge1,vec4 x);
              </td>
              <td>
                经过Hermite插值的阶梯函数。<br/>
                如果x <= edge0 则返回0.0，<br/>
                如果x >= edg1 1.0,<br/>
                否则按照如下方法插值出一个值并返回<br/>
                genType t;<br/>
                t = clamp((x - edge0)/(edg1 - edg0),0,1);<br/>
                return t*t(3-2*t);<br/>
                如果edge0 >= edge1 则返回未定义<br/>
              </td>
            </tr>
          </table>
          <strong>实例：</strong>
          <div>
            <p>假设最大值、最小值是0.3、0.6，输入值为0.4、0.8，输出值为0.35、1.0</p>
            <div class="divLeft">
              <p>smoothstep(0.3, 0.6, 0.4);</p>
              <p>returns 0.35</p>
              <br/>
              <p>smoothstep(0.3, 0.6, 0.8);</p>
              <p>returns 1.0</p>
            </div>
            <div>
              <img src="img/basic_smoothstep.gif">
            </div>
            <strong>实例1</strong>
            <ul class="ul-1-num">
              <li><a href="../../../WebGL编程指南/ch3/HelloQuad_smoothstep.html">平滑过渡</a></li>
              <li><a href="../../../WebGL编程指南/ch3/HelloQuad_smoothstep2.html">平滑过渡</a></li>
              <li><a href="../../../WebGL编程指南/ch3/HelloQuad_smoothstep3.html">平滑过渡</a></li>
            </ul>
          </div>
        </div>
      </section>
    </section>
    <section id="acos">
      <h4>角度和三角函数</h4>
      <div class="content">
        <table border="1">
          <tr>
            <th>语法</th>
            <th>描述</th>
          </tr>
          <tr>
            <td>
              float acos(float x);<br>
              vec2 acos(vec2 x);<br>
              vec3 acos(vec3 x);<br>
              vec4 acos(vec4 x);<br>
            </td>
            <td>反余弦函数，返回角度（弧度值）的正弦值为x。返回值在[-π/2，π/2]区间内，如果x < -1 或者 x > +1 则返回未定义的值</td>
          </tr>
          <tr>
            <td>
              float radians(float degree);<br>
              vec2 radians(vec2 degree);<br>
              vec3 radians(vec3 degree);<br>
              vec4 radians(vec4 degree);<br>
            </td>
            <td>将角度值转换为弧度值，即π*degree/180</td>
          </tr>
          <tr>
            <td>
              float degree(float radians);<br>
              vec2 degree(vec2 radians);<br>
              vec3 degree(vec3 radians);<br>
              vec4 degree(vec4 radians);<br>
            </td>
            <td>将弧度值转换为角度值，即180 * radians/π</td>
          </tr>
        </table>
      </div>
    </section>
    <section id="texture">
      <h4>纹理查询函数</h4>
      <div class="content">
        <table border="1">
          <tr>
            <th>语法</th>
            <th>描述</th>
          </tr>
          <tr>
            <td>
              vec4 texture2D(sampler2D sampler,vec2 coord)<br>
              vec4 texture2D(sampler2D sampler,vec2 coord,float bias)<br>
              vec4 texture2DProj(sampler2D sampler,vec3 coord)<br>
              vec4 texture2DProj(sampler2D sampler,vec3 coord,float bias)<br>
              vec4 texture2DProj(sampler2D sampler,vec4 coord)<br>
              vec4 texture2DProj(sampler2D sampler,vec4 coord,float bias)<br>
              vec4 texture2DLod(sampler2D sampler,vec2 coord,float lod)<br>
              vec4 texture2DLod(sampler2D sampler,vec3 coord,float bias)<br>
              vec4 texture2DLod(sampler2D sampler,vec4 coord,float bias)<br>
            </td>
            <td>
              使用纹理坐标coord，从当前绑定到sampler的二维纹理中读取相应的纹素。对于投影版本（带有Proj的），纹理坐标将从coord的最后一个分量中解析出来，而vec4类型的coord的第3个分量将被忽略，参数bias只可在片元着色器中使用，它表示在sampler是MIPMAP纹理时，加载当前lod上的值
            </td>
          </tr>
          <tr>
            <td>
              vec4 textureCube(samplerCube sampler,vec3 coord)<br>
              vec4 textureCube(samplerCube sampler,vec3 coord,float bias)<br>
              vec4 textureCubeLoad(samplerCube sampler,vec3 coord,float lod)<br>
            </td>
            <td>
              使用纹理坐标coord，从绑定到sampler的立方体纹理中读取响应纹理。coord的方向可用来指定立方体纹理表面
            </td>
          </tr>
        </table>
      </div>
    </section>
    <section id="texture2D">
      <h4>vec4 texture2D(sampler2D sampler,vec2 coord)</h4>
      <p>从sampler指定的纹理上获取coord指定的纹理坐标处的像素颜色</p>
      <div class="content">
        <strong>参数：</strong>
        <ul class="ul-1">
          <li>sampler:指定纹理单元编号</li>
          <li>coord:指定纹理坐标</li>
        </ul>
        <strong>返回值：</strong>
        <p>
          纹理坐标处像素的颜色值，其格式由gl.texImage2D()的internalformat参数决定。
          下表显示来不同参数下的返回值。如果由于某些原因导致纹理图像不可使用，那就返回（0.0,0.0,0.0,1.0） </p>
        <table border="1">
          <tr>
            <th>internalformat</th>
            <th>返回值</th>
          </tr>
          <tr>
            <td>gl.RGB</td>
            <td>(R,G,B,1.0)</td>
          </tr>
          <tr>
            <td>gl.RGBA</td>
            <td>(R,G,B,A)</td>
          </tr>
          <tr>
            <td>gl.ALPHA</td>
            <td>(0.0,0.0,0.0,A)</td>
          </tr>
          <tr>
            <td>gl.LUMINANCE</td>
            <td>(L,L,L,1.0)</td>
          </tr>
          <tr>
            <td>gl.LUMINANCE_ALPHA</td>
            <td>(L,L,L,A)</td>
          </tr>
        </table>

        <strong>实例</strong>
        <ul class="ul-1">
          <li><a href="../../../WebGL编程指南/ch5/TexturedQuad.html">显示纹理贴图</a></li>
          <li><a href="../../../WebGL编程指南/ch5/TexturedQuad_Repeat.html">显示纹理贴图(重复)</a></li>
        </ul>
      </div>
    </section>
    <section id="typeConversion">
      <h4>类型转换函数</h4>
      <div class="content">
        <table border="1">
          <tr>
            <th colspan="3">类型转换内置函数</th>
          </tr>
          <tr>
            <th>转换</th>
            <th>函数</th>
            <th>描述</th>
          </tr>
          <tr>
            <td>转换为整形数</td>
            <td>
              <p>int(float)</p>
              <p>int(bool)</p>
            </td>
            <td>
              <p>将浮点数的小数部分删除，转换为整形数</p>
              <p>true 被转换为1， false被转换为0</p>
            </td>
          </tr>
          <tr>
            <td>转换为浮点数</td>
            <td>
              <p>float(int)</p>
              <p>float(bool)</p>
            </td>
            <td>
              <p>将整数转换为浮点数</p>
              <p>true被转换为1.0，false被转换为0.0</p>
            </td>
          </tr>
          <tr>
            <td>转换为布尔值</td>
            <td>
              <p>bool(int)</p>
              <p>bool(float)</p>
            </td>
            <td>
              <p>0被转换为false，其他非0被转换为true</p>
              <p>true被转换为1.0，false被转换为0.0</p>
            </td>
          </tr>
        </table>
      </div>
    </section>
  </div>
</div>
</body>
</html>